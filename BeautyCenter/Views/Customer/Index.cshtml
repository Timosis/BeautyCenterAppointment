@model IEnumerable<BeautyCenter.Models.Customer.CustomerVm>
@using Kendo.Mvc.UI



<div class="m-portlet m-portlet--mobile">
    <div class="m-portlet__head">
        <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">
                    Müşteriler
                </h3>
            </div>
        </div>
        <div class="m-portlet__head-tools">
            <ul class="m-portlet__nav">
                <li class="m-portlet__nav-item">
                    <a href="#" class="btn btn-accent m-btn m-btn--custom m-btn--pill m-btn--icon m-btn--air">
                        <span>
                            <i class="la la-plus"></i>
                            <span>New record</span>
                        </span>
                    </a>
                </li>
            </ul>
        </div>


    </div>
    <div class="m-portlet__body">
            @(Html.Kendo().Grid<BeautyCenter.Models.Customer.CustomerVm>()
                                        .Name("CustomerGrid")
                                        .Columns(columns =>
                                        {
                                            columns.Bound(p => p.Firstname);
                                            columns.Bound(p => p.Lastname);
                                            columns.Bound(p => p.Email);
                                            columns.Bound(p => p.Telephone);
                                            columns.Command(command => command.Custom("Güncelle").HtmlAttributes(new { @class = "btn btn-outline-success m-btn m-btn--custom m-btn--outline-2x" })).Width(180);
                                            columns.Command(command => command.Custom("Sil").HtmlAttributes(new { @class = "btn btn-outline-danger m-btn m-btn--custom m-btn--outline-2x" })).Width(180);


                                        })
                                        .Pageable()
                                        .Sortable()
                                        .HtmlAttributes(new { @class= "table table-striped- table-bordered table-hover table-checkable" })
                                        .DataSource(dataSource => dataSource
                                            .Ajax()
                                            .PageSize(20)
                                            .Events(events => events.Error("error_handler"))
                                            .Model(model => model.Id(p => p.Id))
                                            .Read(read => read.Action("Customers_Read", "Customer"))
                                            .Create(update => update.Action("EditingPopup_Create", "Grid"))

                                        )
                )
    </div>
</div>





<script type="text/javascript">
    function error_handler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);
        }
    }
</script>
